<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resume Generator Demo</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- CodeMirror CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/foldgutter.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Left Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <i class="fas fa-file-alt"></i>
        <h1>Resume Generator</h1>
      </div>

      <div class="control-section">
        <h3>Resume Data</h3>
        <div class="button-group button-row">
          <div class="button-with-label">
            <span class="button-label">Standard</span>
            <button id="loadExampleBtn" class="btn btn-secondary">
              <i class="fas fa-file-import"></i> Load Template
            </button>
          </div>
          <div class="button-with-label">
            <span class="button-label">Advanced</span>
            <label for="fileInput" class="btn btn-secondary file-btn">
              <i class="fas fa-upload"></i> Load from JSON
              <input type="file" id="fileInput" accept=".json" style="display: none;">
            </label>
          </div>
          <div class="photo-upload-wrapper">
            <span class="optional-label">(Optional)</span>
            <label for="photoInput" class="btn btn-secondary file-btn photo-upload-btn">
              <span class="photo-label-main">
                <i class="fas fa-image"></i>
                Upload Photo
              </span>
              <input type="file" id="photoInput" accept="image/jpeg,image/png,image/jpg" style="display: none;">
            </label>
          </div>
        </div>
        <div id="dataStatus" class="status-message"></div>
      </div>

      <div class="control-section sections-panel" id="sectionsPanel">
        <h3>
          <i class="fas fa-list"></i> Resume Sections
        </h3>
        <p class="sections-hint">Click edit to modify each section. Drag to reorder. Toggle to enable/disable.</p>
        <div id="sectionList" class="section-list">
          <!-- Sections will be dynamically populated here -->
        </div>
      </div>

      <!-- Hidden textarea for internal JSON storage -->
      <textarea id="jsonEditor" style="display: none;"></textarea>
      <div id="jsonError" class="error-message"></div>

      <div class="control-section">
        <h3>Appearance</h3>
        <div class="appearance-grid">
          <div class="form-group">
            <label for="themeSelect">Theme</label>
            <select id="themeSelect" class="select-input">
            </select>
          </div>

          <div class="form-group" id="colorGroup" style="display: none;">
            <label for="colorSelect">Color</label>
            <select id="colorSelect" class="select-input">
            </select>
          </div>
        </div>
      </div>

      <div class="control-section">
        <button id="generateBtn" class="btn btn-primary" disabled>
          <i class="fas fa-eye"></i> Generate Preview
        </button>
        <div class="export-row">
          <button id="exportPdfBtn" class="btn btn-success" disabled>
            <i class="fas fa-file-pdf"></i> Export to PDF
          </button>
          <button id="exportJsonBtn" class="btn btn-neutral" disabled>
            <i class="fas fa-code"></i> Export JSON
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <div class="preview-header">
        <h2>Resume Preview</h2>
        <div id="previewStatus" class="preview-status"></div>
      </div>

      <div class="preview-container" id="previewContainer">
        <div class="preview-placeholder">
          <i class="fas fa-file-alt"></i>
          <p>Load data and select a theme to preview your resume</p>
        </div>
      </div>
    </main>
  </div>

  <!-- Section Editor Modal -->
  <div id="jsonEditorModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>
          <i class="fas fa-code"></i>
          <span id="modalSectionTitle">Edit Section</span>
        </h2>
        <button id="closeModalBtn" class="btn-icon modal-close" title="Close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div id="expandedJsonEditor"></div>
      </div>
      <div class="modal-footer">
        <button id="formatJsonBtn" class="btn btn-secondary">
          <i class="fas fa-align-left"></i> Format and Validate JSON
        </button>
        <div class="modal-actions">
          <button id="cancelModalBtn" class="btn btn-secondary">
            <i class="fas fa-times"></i> Cancel
          </button>
          <button id="saveModalBtn" class="btn btn-primary">
            <i class="fas fa-check"></i> Save Changes
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- CodeMirror JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/foldcode.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/foldgutter.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/brace-fold.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.js"></script>
  <script src="app.js"></script>
</body>
</html>
